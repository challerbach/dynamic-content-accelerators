<nav class="af-navigation">
    <ul class="af-navigation__top-level">
        {{#each this.menu}}
        {{#if (and children children.length)}}
        <li class='af-navigation__droppable'>
            <a data-amp-link='{{data.link}}' href='javascript:void(0);' onclick="AmpCa.Utils.evaluateAmplienceMenuLink('{{data.link}}');">{{data.label}}</a>
            <div class='af-navigation__mega-menu'>
                <div class="af-navigation__panel">
                    <div>
                        {{#each children}}
                        <ul class="ul-reset">
                            <h3>{{data.label}}</h3>
                            {{#each children}}
                            <li><a data-amp-link='{{data.link}}' href='javascript:void(0);' onclick="AmpCa.Utils.evaluateAmplienceMenuLink('{{data.link}}');">{{data.label}}</a></li>
                            {{/each}}
                        </ul>
                        {{/each}}
                    </div>
                    {{#if data.slot}}
                    <div class="af-navigation__banner">
                        {{ templateChooser data.slot }}
                    </div>
                    {{/if}}
                </div>
            </div>
        </li>
        {{else}}
        <li><a data-amp-link='{{data.link}}' href='javascript:void(0);' onclick="AmpCa.Utils.evaluateAmplienceMenuLink('{{data.link}}');">{{data.label}}</a></li>
        {{/if}}
        {{/each}}
    </ul>
    <!-- .container .ul-reset -->
</nav>